# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions.

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### –ì–¥–µ –¥–æ–±–∞–≤–ª—è—Ç—å

```
GitHub ‚Üí –í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (9 —à—Ç—É–∫)

| –ò–º—è —Å–µ–∫—Ä–µ—Ç–∞             | –ß—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç—å          | –ü—Ä–∏–º–µ—Ä                                   |
|-------------------------|-----------------------|------------------------------------------|
| `VPS_HOST`              | IP –∞–¥—Ä–µ—Å VPS          | `123.45.67.89`                           |
| `VPS_USERNAME`          | SSH username          | `deploy`                                 |
| `VPS_SSH_KEY`           | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á    | `-----BEGIN OPENSSH PRIVATE KEY-----...` |
| `REGISTRY_USERNAME`     | Username registry     | `admin`                                  |
| `REGISTRY_PASSWORD`     | –ü–∞—Ä–æ–ª—å registry       | `SecurePass123!`                         |
| `TELEGRAM_BOT_TOKEN`    | –¢–æ–∫–µ–Ω –±–æ—Ç–∞            | `1234567890:ABCdef...`                   |
| `TELEGRAM_BOT_USERNAME` | Username –±–æ—Ç–∞ (–ë–ï–ó @) | `MyFamilyBot`                            |
| `POSTGRES_USER`         | PostgreSQL user       | `familytask`                             |
| `POSTGRES_PASSWORD`     | PostgreSQL –ø–∞—Ä–æ–ª—å     | `SuperSecure123!`                        |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–ª—è PR Preview (4 —à—Ç—É–∫–∏)

| –ò–º—è —Å–µ–∫—Ä–µ—Ç–∞            | –ß—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç—å            |
|------------------------|-------------------------|
| `PR_BOT_TOKEN`         | –¢–æ–∫–µ–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞    |
| `PR_BOT_USERNAME`      | Username —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞ |
| `PR_POSTGRES_USER`     | `familytask_pr`         |
| `PR_POSTGRES_PASSWORD` | –ü–∞—Ä–æ–ª—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î  |

---

## üìã –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### 1. VPS –∏ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

#### `VPS_HOST`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ VPS —Å–µ—Ä–≤–µ—Ä–∞
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:** IP –∞–¥—Ä–µ—Å –∏–∑ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–∞

#### `VPS_USERNAME`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** SSH username –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPS
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `deploy` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `init-vps.sh`)

#### `VPS_SSH_KEY`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPS
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:**
  ```bash
  # Windows
  Get-Content $HOME\.ssh\github_actions_key
  
  # Linux/Mac
  cat ~/.ssh/github_actions_key
  ```
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –≠—Ç–æ –ü–†–ò–í–ê–¢–ù–´–ô –∫–ª—é—á! –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ VPS –≤ `~/.ssh/authorized_keys`

### 2. Docker Registry

#### `REGISTRY_USERNAME`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** Username –¥–ª—è Docker Registry
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:** –í—ã —Å–æ–∑–¥–∞–ª–∏ –µ–≥–æ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VPS —á–µ—Ä–µ–∑ `init-vps.sh`

#### `REGISTRY_PASSWORD`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞—Ä–æ–ª—å –¥–ª—è Docker Registry
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å (16+ —Å–∏–º–≤–æ–ª–æ–≤)

### 3. Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ

#### `TELEGRAM_BOT_TOKEN`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–æ–∫–µ–Ω production Telegram –±–æ—Ç–∞
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:**
    1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
    2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
    3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
    4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

> üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [Telegram Bot Setup](../TELEGRAM_BOT_SETUP.md)

#### `TELEGRAM_BOT_USERNAME`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** Username production –±–æ—Ç–∞ (–ë–ï–ó —Å–∏–º–≤–æ–ª–∞ @)
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:** Username, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–æ—Ç–∞

#### `POSTGRES_USER`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** PostgreSQL username –¥–ª—è production –ë–î
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –∏–º—è, –Ω–µ `postgres`

#### `POSTGRES_PASSWORD`

- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞—Ä–æ–ª—å –¥–ª—è PostgreSQL production –ë–î
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤)
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è:**
  ```bash
  # Linux/Mac
  openssl rand -base64 32
  
  # PowerShell
  -join ((48..57) + (65..90) + (97..122) | Get-Random -Count 32 | % {[char]$_})
  ```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª—É—á–∏—Ç—å SSH –∫–ª—é—á

```bash
# Linux/Mac
cat ~/.ssh/github_actions_key

# Windows PowerShell
Get-Content $env:USERPROFILE\.ssh\github_actions_key
```

### –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å

```bash
# Linux/Mac
openssl rand -base64 32

# PowerShell
-join ((48..57) + (65..90) + (97..122) | Get-Random -Count 32 | % {[char]$_})
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
‚úÖ VPS_HOST
‚úÖ VPS_USERNAME
‚úÖ VPS_SSH_KEY
‚úÖ REGISTRY_USERNAME
‚úÖ REGISTRY_PASSWORD
‚úÖ TELEGRAM_BOT_TOKEN
‚úÖ TELEGRAM_BOT_USERNAME
‚úÖ POSTGRES_USER
‚úÖ POSTGRES_PASSWORD
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è PR Preview):**

```
‚úÖ PR_BOT_TOKEN
‚úÖ PR_BOT_USERNAME
‚úÖ PR_POSTGRES_USER
‚úÖ PR_POSTGRES_PASSWORD
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥**
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** (–º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤)
- **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã** (–∫–∞–∂–¥—ã–µ 3-6 –º–µ—Å—è—Ü–µ–≤)
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

### ‚ùå –ü–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏ (`password123`)
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è production –∏ testing
- ‚ùå –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ `.env` —Ñ–∞–π–ª–∞—Ö –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

## üé¨ –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤:

1. GitHub ‚Üí Actions
2. Deploy to VPS ‚Üí Run workflow
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É ‚Üí Run workflow
4. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏

---

## üîß Troubleshooting

### –û—à–∏–±–∫–∞: "Secret not found"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–º—è —Å–µ–∫—Ä–µ—Ç–∞ –Ω–∞–ø–∏—Å–∞–Ω–æ –ó–ê–ì–õ–ê–í–ù–´–ú–ò –±—É–∫–≤–∞–º–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### –û—à–∏–±–∫–∞: "Permission denied (publickey)"

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏ –ü–†–ò–í–ê–¢–ù–´–ô –∫–ª—é—á –≤ `VPS_SSH_KEY`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ü–£–ë–õ–ò–ß–ù–´–ô –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ VPS:
   ```bash
   ssh deploy@–≤–∞—à_ip
   cat ~/.ssh/authorized_keys
   ```

### –û—à–∏–±–∫–∞: "Registry authentication failed"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `REGISTRY_USERNAME` –∏ `REGISTRY_PASSWORD`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ registry —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ VPS:
   ```bash
   ssh deploy@–≤–∞—à_ip
   docker ps | grep registry
   ```

### –û—à–∏–±–∫–∞: "Bot token is invalid"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/token`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ —Ç–æ–∫–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [GitHub Actions Setup](GITHUB_ACTIONS_SETUP.md) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD
- [VPS Setup](VPS_SETUP.md) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- [Telegram Bot Setup](../TELEGRAM_BOT_SETUP.md) - —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

---

**–í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** ~10 –º–∏–Ω—É—Ç
